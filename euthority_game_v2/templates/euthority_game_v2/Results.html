{% extends "global/Page.html" %}
{% load otree %}

{% block title %}
    Summary and Results
{% endblock %}

{% block content %}

    {% if player.id_in_group == 1 %}
        <p>
            You sent Participant B {{ group.sent_amount }}.
            Participant B returned {{ group.sent_back_amount }}.
            Your payoff in the last round was {{ player.payoff }}.

        </p>
    {% else %}
        <p>
            Participant A sent you {{ group.sent_amount }}.
            You returned {{ group.sent_back_amount }}.
            Your payoff in the last round was {{ player.payoff }}.
        </p>

    {% endif %}

    {% if player.id_in_group == 1 %}

        <table class="table">
            <tr>
                <th>Participant A Total</th>
                <th>Participant B Total</th>

            </tr>
            <tr>
                <td>{{ player1_total }}</td>
                <td>{{ player2_total }}</td>

            </tr>

        </table>

        <h4>Participant A: Round history </h4>
        <table class="table">
            <tr>
                <th>Round</th>
                <th>Payoff</th>

            </tr>
            {% for p in matrix_p1 %}
                {% if forloop.counter <= round %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ p }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>

        <h4>Participant B: Round history</h4>
        <table class="table">
            <tr>
                <th>Round</th>
                <th>Payoff</th>

            </tr>
            {% for p in matrix_p2 %}
                {% if forloop.counter <= round %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ p }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>
    {% endif %}

    {% if player.id_in_group == 2 %}

        <table class="table">
            <tr>
                <th>Participant B Total</th>
                <th>Participant A Total</th>

            </tr>
            <tr>
                <td>{{ player2_total }}</td>
                <td>{{ player1_total }}</td>
            </tr>

        </table>

        <h4>Participant B: Scores </h4>
        <table class="table">
            <tr>
                <th>Round</th>
                <th>Payoff</th>

            </tr>
            {% for p in matrix_p2 %}
                {% if forloop.counter <= round %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ p }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>

        <h4>Participant A: Scores </h4>
        <table class="table">
            <tr>
                <th>Round</th>
                <th>Payoff</th>

            </tr>
            {% for p in matrix_p1 %}
                {% if forloop.counter <= round %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ p }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </table>


    {% endif %}


{% endblock %}